<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cek Kepribadian STIFIn</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: #f2f2f2;
        }

        .card {
            margin-top: 30px;
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .result-box {
            margin-top: 20px;
            padding: 15px;
        }

        .badge-success {
            background-color: #4caf50;
        }

        .badge-failed {
            background-color: #f44336;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="card p-4">
            <h3 class="text-center">Cek Kepribadian STIFIn</h3>
            <form id="formStifin">
                <div class="mb-3">
                    <label for="date" class="form-label">Masukkan Tanggal Lahir</label>
                    <input type="date" class="form-control" id="date" name="date" required />
                </div>
                <div class="d-grid">
                    <button type="submit" class="btn btn-primary">Cek Sekarang</button>
                </div>
            </form>

            <div id="result" class="result-box text-center d-none">
                <span id="badge" class="badge px-3 py-2 mb-3"></span>
                <p id="msg" class="fs-5"></p>
                <a id="link" href="#" target="_blank" class="btn btn-outline-success d-none">Lihat Hasil Lengkap</a>
            </div>

            <p class="text-muted small mt-4">
                <strong>Disclaimer:</strong> Tes ini disediakan hanya untuk hiburan dan refleksi pribadi.
                Hasil yang ditampilkan tidak menggantikan tes STIFIn resmi yang berbasis biometrik (sidik jari).
                Untuk hasil akurat dan rekomendasi pengembangan diri yang sahih, silakan kunjungi penyedia STIFIn resmi
                di
                <a href="https://stifin.com" target="_blank">stifin.com</a>.
            </p>

            <!-- <p class="text-muted small mt-4">
                *Hanya untuk hiburan. Bukan tes STIFIn resmi.*
              </p> -->
              
        </div>
    </div>

    <script>
        document.getElementById("formStifin").addEventListener("submit", async function (e) {
            e.preventDefault();
            const date = document.getElementById("date").value;
            const resultBox = document.getElementById("result");
            const badge = document.getElementById("badge");
            const msg = document.getElementById("msg");
            const link = document.getElementById("link");

            resultBox.classList.add("d-none");
            badge.className = "badge px-3 py-2 mb-3";
            msg.textContent = "";
            link.classList.add("d-none");

            try {
                const response = await fetch(`https://n8n-hehmqxfm.ap-southeast-1.clawcloudrun.com/webhook/brain?date=${date}`);
                const data = await response.json();

                resultBox.classList.remove("d-none");

                if (data.con) {
                    badge.classList.add("badge-success");
                    badge.textContent = "Berhasil";
                    msg.textContent = data.msg;
                    link.href = data.link;
                    link.classList.remove("d-none");
                } else {
                    badge.classList.add("badge-failed");
                    badge.textContent = "Gagal";
                    msg.textContent = data.msg;
                }
            } catch (error) {
                resultBox.classList.remove("d-none");
                badge.classList.add("badge-failed");
                badge.textContent = "Error";
                msg.textContent = "Gagal terhubung ke server.";
            }
        });
    </script>
</body>

</html>
